---
# This is an example playbook to execute Ansible tests.

- name: Verify
  hosts: all
  gather_facts: false
  vars:
    # The front page of ghidra-sre.org has a SHA hash of the latest release
    # We use this to figure out if we're running latest as part of the verify script
    latestCheckHash: f549dfccd0f106f9befb0b5afb7f2f86050356631b29bc9dd15d7f0333acbc7e
    latestCheckUrl: https://ghidra-sre.org
  tasks:
  - name: Ensure we're grabbing latest
    uri:
      url: "{{ latestCheckUrl }}"
      return_content: yes
    register: this
    failed_when: "'{{ latestCheckHash }}' not in this.content"
